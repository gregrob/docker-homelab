# MQTT configuration
mqtt:
  host: emqx.max.lan
  user: '{FRIGATE_MQTT_USER}'
  password: '{FRIGATE_MQTT_PASSWORD}'


# Detectors configuration
detectors:
  coral-pci1:
    type: edgetpu
    device: pci
  #coral-usb1:
  #  type: edgetpu
  #  device: usb


# Database configuration
database:
  path: /db/frigate.db


# ffmpeg configuration
# Settings copied from https://docs.frigate.video/configuration/camera_specific/
# Include hardware acceleration for intel NUC 11th gen
ffmpeg:
  #hwaccel_args: -c:v h264_qsv # prior v0.14.x
  #hwaccel_args: preset-vaapi # v0.14.x
  hwaccel_args: preset-intel-qsv-h264 # after updating to v0.15.0, can be applied on a per camera basis
  output_args:
    record: preset-record-ubiquiti
  #  record: -f segment -segment_time 10 -segment_format mp4 -reset_timestamps 1 -strftime 1 -c:v copy -ar 44100 -c:a aac
    #rtmp: -c:v copy -f flv -ar 44100 -c:a aac


# Detect configuration
# NOTE: Can be overridden at the camera level
detect:
  # width of the frame for the input with the detect role (default: 1280)
  # Use native stream
  #width: 1280
  # height of the frame for the input with the detect role (default: 720)
  # Use native stream
  #height: 720
  # desired fps for your camera for the input with the detect role (default: 5)
  # NOTE: Recommended value of 5. Ideally, try and reduce your FPS on the camera.
  fps: 5
  # Optional: enables detection for the camera (default: True)
  # This value can be set via MQTT and will be updated in startup based on retained value
  enabled: true


# Object configuration
# NOTE: Can be overridden at the camera level
objects:
  # Optional: list of objects to track from labelmap.txt (default: just person)
  track:
    - person
    #- car
    #- bicycle
    #- dog
    #- cat
  filters:
    person:
      threshold: 0.75


# Record configuration
# NOTE: Can be overridden at the camera level
record:
  # Enable recording
  # WARNING: If recording is disabled in the config, turning it on via
  #          the UI or MQTT later will have no effect.
  # WARNING: Frigate does not currently support limiting recordings based
  #          on available disk space automatically. If using recordings,
  #          you must specify retention settings for a number of days that
  #          will fit within the available disk space of your drive or Frigate
  #          will crash.
  enabled: true
  alerts:
    retain:
      days: 2
  detections:
    retain:
      days: 2
snapshots:
  # Enable writing jpg snapshot to /media/frigate/clips (default: was False)
  # This value can be set via MQTT and will be updated in startup based on retained value
  # was True but set to False to save flash lifetime
  enabled: true
  retain:
    # Required: Default retention days (default: was 10)
    #default: 10
    default: 2
    # Optional: Per object retention days
    objects:
      #person: 15
      person: 2


go2rtc:
  streams:
    frontyard-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/0rs9FcPPm2FamTg8 # Medium Resolution (1280x720)
    #driveway-high:
    #  rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/068VHFAFGIlnHphb # High Resolution (3840x2160)
    driveway-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/pyCIJhpB238a8yNn # Medium Resolution (1280x720)
    #front_door-medium:
    #  rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/UOBpag22o3QNxjlG # Medium Resolution (1024x576)
    front_door-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/CvVpRPoopzqNwEmC # Medium Resolution (720x1280)
    courtyard_and_spa-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/NqFKkySRyoIOlcyu # Medium Resolution (1280x720)
    alfresco-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/jsRMXiQiPV9UW9lT # Medium Resolution (1024x576)
    backyard-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/iiANERyvcQOoMZOd # Medium Resolution (1280x720)
    wetlands-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/32WOFwf3arzz2vuM # Medium Resolution (1280x720)
    side_back-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/Af1FNaw6ZXuGZT6F # Medium Resolution (1280x720)
    side_front-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/ouJCZEe0IMo9wBjz # Medium Resolution (1280x720)
    theatre-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/WcPyyCYbzUB7UbKO # Medium Resolution (1280x720)
    garage-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/WjP8cMNo2Kx71Nkl # Medium Resolution (1024x576)
    server-room-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/UOBpag22o3QNxjlG # Medium Resolution (1024x576)
    side_door-medium: 
      rtspx://{FRIGATE_UNIFI_PROTECT_IP_ADDRESS}:7441/M2oKKDCiJNLfB2et # Medium Resolution (1280x720)

# NOTE: On unifi cameras change port from rtsps:7441 to rtsp:7447
# NOTE: DNS does not work here, use environment variable instead
cameras:
  #frontyard:
  #  enabled: false ### DISABLE
  #  ffmpeg:
  #    inputs:
  #      - path: rtsp://127.0.0.1:8554/frontyard-medium
  #        roles:
  #          - detect
  #  mqtt:
  #    enabled: false ### DISABLE
  #    timestamp: false
  #    bounding_box: false
  #    crop: true
  #    quality: 100
  #    height: 500
  #  ui:
  #    order: 0

  driveway:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/driveway-medium
          roles:
            - detect
    #objects:
    #  track:
    #    - person
    snapshots:
      required_zones:
        - driveway-line
    review:
      alerts:
        labels:
          - person
        required_zones:
          - driveway-line
      detections: # No detections
        labels: []
    mqtt:
      enabled: true
      timestamp: false
      bounding_box: true
      required_zones:
        - driveway-line
    ui:
      order: 1
    motion:
      mask: 
        0.714,1,0.73,0.896,0.646,0.843,0.664,0.691,0.577,0.617,0.642,0.409,0.358,0.294,0.015,0.616,0.043,0.715,0.131,0.998,0,1,0,0,1,0,1,1
    zones:
      driveway-line:
        coordinates: 
          0.134,0.998,0.71,1,0.723,0.9,0.64,0.847,0.66,0.696,0.571,0.621,0.637,0.413,0.358,0.301,0.021,0.619
        loitering_time: 0
        inertia: 3

  front_door:
    enabled: true
    detect:
      width: 720   # Explicitly set for portrait orientation (avoids incorrect auto-scaling - https://github.com/blakeblackshear/frigate/discussions/12724 comment #15)
      height: 1280 # Prevents Frigate from assuming default landscape resolution (1280x720)
    live:
      height: 1280 # Ensures live view matches portrait orientation for proper display
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/front_door-medium
          roles:
            - detect
    #objects:
    #  track:
    #    - person
    snapshots:
      required_zones:
        - front-deck
    review:
      alerts:
        labels:
          - person
        required_zones:
          - front-deck
      detections: # No detections
        labels: []
    mqtt:
      enabled: true
      timestamp: false
      bounding_box: true
      required_zones:
        - front-deck
      # example for double take
      #bounding_box: false
      #crop: true
      #quality: 100
      #height: 500
    ui:
      order: 2
    motion:
      mask:
        - 0.898,0.116,0.575,0.129,0.525,0.263,0.218,0,0.602,0,1,0,1,0.574,0.965,0.224
        - 0,0.017,0.307,0.017,0.308,0,0,0
    zones:
      front-deck:
        coordinates: 
          0.547,0.272,0.528,0.263,0.582,0.135,0.897,0.123,0.956,0.24,0.988,0.595,0.925,0.79,0.625,0.775,0.388,0.747,0.39,0.733,0.353,0.723,0.517,0.293,0.538,0.294
        loitering_time: 0
        inertia: 3

  courtyard_and_spa:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/courtyard_and_spa-medium
          roles:
            - detect
    #objects:
    #  track:
    #    - person
    snapshots:
      required_zones:
        - courtyard
    review:
      alerts:
        labels:
          - person
        required_zones:
          - courtyard
      detections: # No detections
        labels: []
    mqtt:
      enabled: true
      timestamp: false
      bounding_box: true
      required_zones:
        - courtyard
    ui:
      order: 3
    motion:
      mask: 
        0.709,1,0.728,0.519,0.577,0.486,0.55,0.605,0.588,0.786,0.643,1,0,1,0,0,1,0,1,1
    zones:
      courtyard:
        coordinates: 
          0.646,1,0.705,1,0.728,0.521,0.578,0.495,0.55,0.607,0.592,0.784
        loitering_time: 0
        inertia: 3
    objects:
      filters:
        person:
          mask:
            - 0.713,1,0.726,0.514,0.673,0.504,0.688,0,1,0,1,1
            - 0.637,1,0.542,0.591,0.582,0.429,0.377,0,0,0,0,1

  alfresco:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/alfresco-medium
          roles:
            - detect
    #objects:
    #  track:
    #    - person
    snapshots:
      required_zones:
        - bbq-area
    review:
      alerts:
        labels:
          - person
        required_zones:
          - bbq-area
      detections: # No detections
        labels: []
    mqtt:
      enabled: true
      timestamp: false
      bounding_box: true
      required_zones:
        - bbq-area
    ui:
      order: 4
    motion:
      mask:
        - 0.129,0.384,0.514,0.226,0.52,0,0,0.003
        - 0.846,0.632,0.894,0.409,0.943,0.162,0.681,0.002,0.585,0.003,0.568,0.29
        - 0.115,0.429,0.19,0.988,0.342,0.938,0.35,0.581,0.249,0.412
    zones:
      bbq-area:
        coordinates: 
          0.555,0.277,0.997,0.824,0.938,0.99,0.348,0.994,0.355,0.576,0.249,0.405,0.137,0.423,0.125,0.395,0.518,0.231
        loitering_time: 0
        inertia: 3
    objects:
      filters:
        person:
          mask: 0.868,0.662,0.975,0.168,0.685,0,0.566,0,0.552,0.273

  backyard:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/backyard-medium
          roles:
            - detect
    #objects:
    #  track:
    #    - person
    snapshots:
      required_zones:
        - yard
    review:
      alerts:
        labels:
          - person
        required_zones:
          - yard
      detections: # No detections
        labels: []
    mqtt:
      enabled: true
      timestamp: false
      bounding_box: true
      required_zones:
        - yard
    ui:
      order: 5
    motion:
      mask: 
        0.425,1,0.408,0.427,0.329,0.262,0.288,0.266,0.285,0.446,0.224,0.672,0.075,0.935,0,0.8,0,0,1,0,1,1
    zones:
      yard:
        coordinates: 
          0.421,0.997,0.404,0.427,0.327,0.264,0.289,0.269,0.288,0.446,0.227,0.672,0.052,0.992
        loitering_time: 0
        inertia: 3

  wetlands:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/wetlands-medium
          roles:
            - detect
    #objects:
    #  track:
    #    - person
    snapshots:
      required_zones:
        - fence-line
    review:
      alerts:
        labels:
          - person
        required_zones:
          - fence-line
      detections: # No detections
        labels: []
    mqtt:
      enabled: true
      timestamp: false
      bounding_box: true
      required_zones:
        - fence-line
    ui:
      order: 6
    motion:
      mask:
        - 0.098,1,0.037,0.58,0.247,0.627,0.345,0.621,0.86,0.41,0.991,0.55,1,0.524,1,0,0,0,0,1
        - 0.198,1,0.208,0.889,0.341,0.846,0.445,0.827,0.541,0.976,0.694,0.829,0.714,0.688,0.756,0.594,0.806,0.552,0.847,0.546,0.875,0.553,0.914,0.465,1,0.53,1,0.722,1,1
    zones:
      fence-line:
        coordinates: 
          0.1,0.997,0.194,0.998,0.204,0.883,0.443,0.819,0.541,0.969,0.69,0.825,0.709,0.684,0.752,0.594,0.802,0.548,0.846,0.539,0.874,0.545,0.908,0.466,0.86,0.414,0.343,0.626,0.249,0.634,0.038,0.582
        loitering_time: 0
        inertia: 3
    objects:
      mask: 
        0.029,0.566,0.238,0.617,0.336,0.611,0.861,0.405,1,0.566,1,0,0,0,0,0.538

  side_back:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/side_back-medium
          roles:
            - detect
    #objects:
    #  track:
    #    - person
    snapshots:
      required_zones:
        - side-back-path
    review:
      alerts:
        labels:
          - person
        required_zones:
          - side-back-path
      detections: # No detections
        labels: []
    mqtt:
      enabled: true
      timestamp: false
      bounding_box: true
      required_zones:
        - side-back-path
    ui:
      order: 7
    motion:
      mask:
        - 0.382,0.996,0.5,0.322,0.332,0.228,0.501,0,0.001,0.001,0,0.996
        - 0.502,0.003,0.548,0.174,0.609,0.127,0.615,0.019,0.705,0.018,0.707,0
    zones:
      side-back-path:
        coordinates: 
          0.385,0.996,0.658,0.997,0.679,0.294,0.678,0.107,0.625,0.095,0.616,0.134,0.544,0.188,0.516,0.118,0.431,0.278,0.504,0.316
        loitering_time: 0
        inertia: 3

  side_door:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/side_door-medium
          roles:
            - detect
    #objects:
    #  track:
    #    - person
    snapshots:
      required_zones:
        - side-door-path
    review:
      detections: # No detections
        labels: []
      alerts:
        required_zones: side-door-path
    mqtt:
      enabled: true
      timestamp: false
      bounding_box: true
      required_zones:
        - side-door-path
    ui:
      order: 8
    motion:
      mask:
        - 0,0.143,0.295,0.032,0.299,0,0,0
        - 0.737,-0.001,1,0.173,1,0
    zones:
      side-door-path:
        coordinates: 
          0.08,0.821,0.228,0.93,0.406,1,0.783,1,0.916,0.935,0.998,0.884,1,0.615,0.819,0.623,0.404,0.597,0.158,0.558,0.001,0.508,0,0.533,0.096,0.661
        inertia: 3
        loitering_time: 0
        objects: person

    objects:
      filters:
        person:
          mask: 0.36,0.128,0.474,0.127,0.483,0.359,0.388,0.352
  side_front:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/side_front-medium
          roles:
            - detect
    #objects:
    #  track:
    #    - person
    snapshots:
      required_zones:
        - side-front-path
    review:
      alerts:
        labels:
          - person
        required_zones:
          - side-front-path
      detections: # No detections
        labels: []
    mqtt:
      enabled: true
      timestamp: false
      bounding_box: true
      required_zones:
        - side-front-path
    ui:
      order: 9
    motion:
      mask: 
        0.997,0.966,0.33,0.23,0.302,0.247,0.306,0.299,0.204,0.336,0.183,0.055,0.001,0.049,0,0.001,0.997,0.001
    zones:
      side-front-path:
        coordinates: 0.282,1,0.189,0.395,0.355,0.345,0.444,0.574,0.751,0.993
        loitering_time: 0
        inertia: 3

  server-room:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/server-room-medium
          roles:
            - detect
    objects:
      track:
        - person
      filters:
        person:
          threshold: 0.56 # lowered threshold for server room, 0.6 still didnt work well
    snapshots:
      required_zones:
        - walk-area
    review:
      alerts:
        labels:
          - person
        required_zones: walk-area
      detections: # No detections
        labels: []
    mqtt:
      enabled: true
      timestamp: false
      bounding_box: true
      required_zones:
        - walk-area
    ui:
      order: 10
    zones:
      walk-area:
        coordinates: 0.07,1,0.145,0.146,0.659,0.149,0.85,1
        loitering_time: 0
        inertia: 3
    motion:
      mask:
        - 0.853,1,0.661,0.146,0.536,0,0.999,0,1,1
        - 0,0.037,0.292,0.039,0.291,0,0,0
        - 0,1,0.068,1,0.15,0.039,0,0.037
        - 0.365,0.143,0.66,0.145,0.537,0,0.37,0

#theatre:
  #  enabled: false ### DISABLE
  #  ffmpeg:
  #    inputs:
  #      - path: rtsp://127.0.0.1:8554/theatre-medium
  #        roles:
  #          - detect
  #  objects:
  #    track:
  #      - person
  #      - dog
  #  mqtt:
  #    enabled: false ### DISABLE
  #    timestamp: false
  #    bounding_box: false
  #    crop: true
  #    quality: 100
  #    height: 500
  #  ui:
  #    order: 10

  #garage:
  #  enabled: false ### DISABLE
  #  ffmpeg:
  #    inputs:
  #      - path: rtsp://127.0.0.1:8554/garage-medium
  #        roles:
  #          - detect
  #  mqtt:
  #    enabled: false ### DISABLE
  #    timestamp: false
  #    bounding_box: false
  #    crop: true
  #    quality: 100
  #    height: 500
  #  ui:
  #    order: 11

version: 0.16-0
semantic_search:
  enabled: false
  model_size: small
face_recognition:
  enabled: true
  model_size: small
lpr:
  enabled: false
classification:
  bird:
    enabled: false
